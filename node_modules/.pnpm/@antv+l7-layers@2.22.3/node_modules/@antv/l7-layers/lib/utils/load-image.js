"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.loadImage = loadImage;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
function loadImage(_x) {
  return _loadImage.apply(this, arguments);
}
function _loadImage() {
  _loadImage = (0, _asyncToGenerator2.default)(function* (url) {
    // @ts-ignore
    if (window.createImageBitmap) {
      const response = yield fetch(url);
      const imageBitmap = yield createImageBitmap(yield response.blob());
      return imageBitmap;
    } else {
      const image = new window.Image();
      return new Promise(res => {
        image.onload = () => res(image);
        image.src = url;
        image.crossOrigin = 'Anonymous';
      });
    }
  });
  return _loadImage.apply(this, arguments);
}